<!DOCTYPE html>
<!--
GOD13 ENTERPRISE-GRADE SINGLE FILE
GitHub Pages + Firebase Auth + Firestore
ì‹¤ì„œë¹„ìŠ¤ êµ¬ì¡° / ê´€ë¦¬ì ë¶„ë¦¬ / ì»¤ë®¤ë‹ˆí‹° / ê³µì§€ / ê²°ê³¼
-->
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GOD13 | Next-Gen Community</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;800;900&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#020617;
  --panel:#0f172a;
  --line:#111827;
  --pri:#2563eb;
  --pri2:#1d4ed8;
  --ok:#22c55e;
}
*{box-sizing:border-box}
body{margin:0;font-family:Pretendard,system-ui;background:radial-gradient(1200px 600px at 20% -10%,#1e293b,#020617);color:#fff}
header{position:sticky;top:0;z-index:10;background:rgba(2,6,23,.9);backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
header .wrap{max-width:1200px;margin:auto;padding:18px;display:flex;align-items:center;justify-content:space-between}
.logo{font-weight:900;font-size:22px}
nav button{background:none;border:none;color:#cbd5f5;font-weight:600;margin-left:14px;cursor:pointer}
nav button:hover{color:#fff}
main{max-width:1200px;margin:30px auto;padding:0 16px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
.card{background:linear-gradient(180deg,#0f172a,#020617);border:1px solid var(--line);border-radius:18px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.35);animation:up .4s ease}
@keyframes up{from{opacity:0;transform:translateY(12px)}to{opacity:1}}
.card h3{margin:0 0 10px;font-size:18px}
input,select,textarea,button{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);background:#020617;color:#fff;font-size:15px}
textarea{resize:vertical;min-height:80px}
button{background:var(--pri);border:none;font-weight:700;cursor:pointer}
button:hover{background:var(--pri2)}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;background:#1e293b;font-size:12px;margin:2px}
.hidden{display:none}
.list .item{padding:12px;border-radius:12px;background:#020617;border:1px solid var(--line);margin-top:8px;display:flex;justify-content:space-between;align-items:center}
.item small{opacity:.7}
.adminBox{border:1px solid var(--ok);box-shadow:0 0 20px rgba(34,197,94,.25)}
footer{margin-top:60px;padding:30px;text-align:center;border-top:1px solid var(--line);opacity:.7}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="logo">ğŸ”¥ GOD13</div>
    <nav id="nav"></nav>
  </div>
</header>

<main>

<!-- AUTH -->
<section id="authSection" class="grid">
  <div class="card">
    <h3>ë¡œê·¸ì¸</h3>
    <input id="loginEmail" placeholder="ì´ë©”ì¼">
    <input id="loginPw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
    <button onclick="login()">ë¡œê·¸ì¸</button>
  </div>
  <div class="card">
    <h3>íšŒì›ê°€ì…</h3>
    <input id="joinEmail" placeholder="ì´ë©”ì¼">
    <input id="joinPw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
    <button onclick="signup()">íšŒì›ê°€ì…</button>
  </div>
</section>

<!-- APP -->
<section id="app" class="hidden">
  <div class="grid">

    <div class="card">
      <h3>ğŸ‘¤ ë‚´ ê³„ì •</h3>
      <div id="me"></div>
      <button onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
    </div>

    <div class="card">
      <h3>ğŸ“¢ ê³µì§€</h3>
      <div id="noticeList" class="list"></div>
    </div>

    <div class="card">
      <h3>ğŸ“ ì˜ì¬ ê²°ê³¼</h3>
      <div id="resultList" class="list"></div>
    </div>

    <div id="admin" class="card adminBox hidden">
      <h3>ğŸ›¡ ê´€ë¦¬ì íŒ¨ë„</h3>
      <textarea id="noticeText" placeholder="ê³µì§€ ì‘ì„±"></textarea>
      <button onclick="addNotice()">ê³µì§€ ë“±ë¡</button>
      <hr>
      <input id="resName" placeholder="ë‹‰ë„¤ì„">
      <select id="resType"><option>ì •ë³´</option><option>ê³¼í•™</option></select>
      <button onclick="addResult()">ê²°ê³¼ ì¶”ê°€</button>
    </div>

  </div>
</section>
</main>

<footer>Â© GOD13 ENTERPRISE UI</footer>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, orderBy, query } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyApxbnjQR06-1LJi-oonGV70YoPgd7nuRA",
  authDomain: "god13-79e4e.firebaseapp.com",
  projectId: "god13-79e4e",
  storageBucket: "god13-79e4e.appspot.com",
  messagingSenderId: "978260301114",
  appId: "1:978260301114:web:23c79352313d5b787cec03"
};

const ADMIN = "admin@god13.com";
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.login = () => signInWithEmailAndPassword(auth, loginEmail.value, loginPw.value);
window.signup = () => createUserWithEmailAndPassword(auth, joinEmail.value, joinPw.value);
window.logout = () => signOut(auth);

onAuthStateChanged(auth, async u => {
  const authSection = document.getElementById('authSection');
  const appSection = document.getElementById('app');
  if(!u){ 
    authSection.classList.remove('hidden'); 
    appSection.classList.add('hidden'); 
    return;
  }
  authSection.classList.add('hidden'); 
  appSection.classList.remove('hidden');
  me.innerHTML = `<b>${u.email}</b>`;
  admin.classList.toggle('hidden', u.email!==ADMIN);
  loadNotices(); 
  loadResults();
});

window.addNotice = async () => {
  await addDoc(collection(db,'notices'),{text:noticeText.value,time:Date.now()});
  noticeText.value=''; loadNotices();
}

async function loadNotices(){
  noticeList.innerHTML='';
  const q=query(collection(db,'notices'),orderBy('time','desc'));
  const s=await getDocs(q);
  s.forEach(d=>{
    const it=document.createElement('div');it.className='item';
    it.innerHTML=`<span>${d.data().text}</span>`;
    if(admin.classList.contains('hidden')===false){
      const b=document.createElement('button');b.textContent='ì‚­ì œ';
      b.onclick=async()=>{await deleteDoc(doc(db,'notices',d.id));loadNotices()};
      it.appendChild(b);
    }
    noticeList.appendChild(it);
  })
}

window.addResult = async () =>{
  await addDoc(collection(db,'results'),{name:resName.value,type:resType.value});
  resName.value=''; loadResults();
}

async function loadResults(){
  resultList.innerHTML='';
  const s=await getDocs(collection(db,'results'));
  s.forEach(d=>{
    const it=document.createElement('div');it.className='item';
    it.innerHTML=`<span>${d.data().name}</span><small>${d.data().type}</small>`;
    resultList.appendChild(it);
  })
}
</script>
</body>
</html>
